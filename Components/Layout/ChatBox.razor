@using ComBot_Revamped.Commands
@using System.ComponentModel.DataAnnotations
<div class="form h-100 d-flex flex-column-reverse">
    <div class="w-100">
        <EditForm Model="Message" method="post" FormName="sendMessage" OnValidSubmit="OnSubmitText" class="flex-row d-flex w-100">
            <InputText class="rounded form-floating form-control mr-4 w-100" @bind-Value="Message.Text" id="Message.Text" placeholder="Type text to message..." autocomplete="off"></InputText>
            <button class="btn btn-primary" type="submit">Send</button>
        </EditForm>
    </div>
</div>

@code {
    [SupplyParameterFromForm]
    private UserMessage Message { get; set; } = new();

    private void OnSubmitText()
    {
        CommandManager.StartCommand<Talk>("1256129744206827550", Message.Text);
    }

    private sealed class UserMessage
    {
        [Required]
        public string Text { get; set; } = "";
    }
}